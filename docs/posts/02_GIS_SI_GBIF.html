<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Matic Jančič (&amp; Peter Glasnović); Department of biodiversity, University of Primorska">
<meta name="dcterms.date" content="2023-03-22">
<meta name="description" content="Geografski informacijski sistemi in vede, Vaja 2">

<title>Matic Jančič: Teaching portfolio - DOSTOP DO PODATKOV IZ PORTALA GBIF IN PRIKAZ Z UPORABO ORODIJ LEAFLET</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/academicons-1.9.2/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/academicons-1.9.2/size.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="../site_libs/leaflet-1.3.1/leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-1.3.1/leaflet.js"></script>
<link href="../site_libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet">
<script src="../site_libs/proj4-2.6.2/proj4.min.js"></script>
<script src="../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet">
<script src="../site_libs/leaflet-binding-2.2.0.9000/leaflet.js"></script>
<script src="../site_libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="../site_libs/leaflet-providers-plugin-2.2.0.9000/leaflet-providers-plugin.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Matic Jančič: Teaching portfolio</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../publications.html" rel="" target="">
 <span class="menu-text">Publications</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/maticjancic" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/maticjancic/" rel="" target=""><i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://www.researchgate.net/profile/Matic-Jancic" rel="" target="">
 <span class="menu-text"><i class="ai  ai-researchgate" title="" style="color:"></i></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://orcid.org/0000-0002-6872-4078" rel="" target="">
 <span class="menu-text"><i class="ai  ai-orcid" title="" style="color:"></i></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:maticjanchich@gmail.com" rel="" target=""><i class="bi bi-https://icons.getbootstrap.com/icons/envelope-at/" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">DOSTOP DO PODATKOV IZ PORTALA GBIF IN PRIKAZ Z UPORABO ORODIJ LEAFLET</h1>
                  <div>
        <div class="description">
          Geografski informacijski sistemi in vede, Vaja 2
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">Uvod v R kot GIS</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Matic Jančič (&amp; Peter Glasnović); Department of biodiversity, University of Primorska </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 22, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#kaj-je-global-biodiversity-information-facility-gbif" id="toc-kaj-je-global-biodiversity-information-facility-gbif" class="nav-link active" data-scroll-target="#kaj-je-global-biodiversity-information-facility-gbif">Kaj je Global Biodiversity Information Facility (GBIF)?</a></li>
  <li><a href="#dostop-do-podatkov-v-spletni-bazi-gbif-v-r-u" id="toc-dostop-do-podatkov-v-spletni-bazi-gbif-v-r-u" class="nav-link" data-scroll-target="#dostop-do-podatkov-v-spletni-bazi-gbif-v-r-u">Dostop do podatkov v spletni bazi GBIF v R-u</a></li>
  <li><a href="#izbiranje-stolpcev-in-filtriranje-podatkov" id="toc-izbiranje-stolpcev-in-filtriranje-podatkov" class="nav-link" data-scroll-target="#izbiranje-stolpcev-in-filtriranje-podatkov">Izbiranje stolpcev in filtriranje podatkov</a></li>
  <li><a href="#interaktivni-zemljevidi-paketa-leaflet" id="toc-interaktivni-zemljevidi-paketa-leaflet" class="nav-link" data-scroll-target="#interaktivni-zemljevidi-paketa-leaflet">Interaktivni zemljevidi paketa <code class="sourceCode r">leaflet</code></a></li>
  <li><a href="#imate-vi-kakšno-vprašanje" id="toc-imate-vi-kakšno-vprašanje" class="nav-link" data-scroll-target="#imate-vi-kakšno-vprašanje">Imate vi kakšno vprašanje?</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Povzetek
</div>
</div>
<div class="callout-body-container callout-body">
<p>Na teh vajah boste:</p>
<ul>
<li>spoznali bazo podatkov Global Biodiversity Information Facility (GBIF),</li>
<li>se naučili instalirati in uporabiti dodatne R funkcije (iz paketov <code>rgbif</code>, <code>dplyr</code> in <code>leaflet</code>),</li>
<li>uporabili R ukaze za dostop do in prenos lokacij iz GBIF serverja ,</li>
<li>se naučili izbiranja stolpcev in filtiranja podatkov iz tabel,</li>
<li>se naučili prikazati lokacije točk z uporabo paketa <code>leaflet</code> in izvoziti interaktivni zemljevid v <code>html</code> format.</li>
</ul>
</div>
</div>
<section id="kaj-je-global-biodiversity-information-facility-gbif" class="level2">
<h2 class="anchored" data-anchor-id="kaj-je-global-biodiversity-information-facility-gbif">Kaj je Global Biodiversity Information Facility (GBIF)?</h2>
<p>Global Biodiversity Information Facility (GBIF) je mednarodno omrežje oragnizacija, ki je vzpostavilo podatkovno infrastrukturo oziroma bazo. Financirajo ga vlade držav, namenjen pa je <strong>prostemu dostopu</strong> do podatkov o pojavljanju vrst na našem planetu.</p>
<p>Ob času pripravljanja teh vsebin je bilo na portalu objavljenih <strong>več kot 2.2 milijardi lokacij</strong>, tako v morskih kot tudi kopenskih ekosistemih na globalni ravni. Že sama spletna stran je zelo uporabna za iskanje in prenos podatkov, še boljše pa je, da lahko podatke o vrstah ali taksonih poiščemo in prenesemo z uporabo R ukazov neposredno iz serverja GBIF-ja.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Naloga
</div>
</div>
<div class="callout-body-container callout-body">
<p>Odprite spletno stran <a href="https://www.gbif.org/">GBIF</a> in jo raziščite v naslednjih nekaj minutah.</p>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="05_images/GBIF.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Domača stran Global Biodiversity Information Facility.</figcaption>
</figure>
</div>
</section>
<section id="dostop-do-podatkov-v-spletni-bazi-gbif-v-r-u" class="level2">
<h2 class="anchored" data-anchor-id="dostop-do-podatkov-v-spletni-bazi-gbif-v-r-u">Dostop do podatkov v spletni bazi GBIF v R-u</h2>
<p>Podatke iz GBIF je mogoče prenesti ročno in nato uvoziti v R. Vendar če so programerji lahko leni, smo lahko leni tudi biologi, kajne? V ta namen obstaja paket R, imenovan <code class="sourceCode r">rgbif</code>. Vsebuje funkcije, ki nam omogočajo neposreden stik s strežnikom GBIF, komuniciranje z njim in pridobivanje podatkov, ki nas zanimajo. V R-U moramo najprej inštalirati oziroma namestiti paket s funkcijo <code class="sourceCode r"><span class="fu">install.packages</span>()</code> <strong>z imenom paketa v narekovajih znotraj oklepajev</strong>. To samodejno prenese in namesti paket. Prav tako moramo paket naložiti vsakič, ko zaženemo ali znova zaženemo R ali RStudio. To naredimo s funkcijo <code class="sourceCode r"><span class="fu">library</span>()</code> <strong>z imenom paketa brez narekovajev v oklepaju</strong>. Vsakemu paketu je priložen dokument, v katerem so na voljo vse pomembne informacije, primer za <code class="sourceCode r">rgbif</code> je dostopen <a href="https://cran.r-project.org/web/packages/rgbif/rgbif.%20pdf">tukaj</a>.</p>
<div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Pomembno
</div>
</div>
<div class="callout-body-container callout-body">
<p>Z instaliranjem osnovnega R-a so nam na voljo le nekatera privzeta orodja. Razlog za to je, da obstaja tako veliko število orodij, da jih posamezen uporabnik velike večine nikoli ne bo potreboval. Lahko pa enostavno dodajamo tista, ki jih potrebumo, tako da dodatne “pakete” prenesemo iz interneta in inštaliramo na naš računalnik (predstavljajte si R paket kot razširitev osnovnega R-a). <u>Inštalacijo paketa potrebujemo narediti le enkrat, pred prvo uporabo le-tega!</u></p>
<p>Pozorni pa moramo biti, da pred vsako uporabo paketa, le-tega naredimo dostopnega za uporabo, kar pomeni, <u>da ga moramo aktivirati vsakič, ko odpremo R ali RStudio!</u></p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Naloga
</div>
</div>
<div class="callout-body-container callout-body">
<p>Odprite nov R skript v meniju <code class="sourceCode r">File</code> tako, da kliknete <code>New file</code> in potem <code class="sourceCode r">R script</code>. Skript bo imel ime Untitled1 (ali Untitled2, če je že odprt prazen skript).</p>
<p>Shranite skript na namizje vašega računalnika in ga poimenujte <code>Dostop do podatkov iz portala GBIF z R: braszdasti kit</code>.</p>
<p>Kopirajte in prilepite spodnjo kodo v skript R, premaknite kazalec v prvo vrstico s kodo in kliknite <code class="sourceCode r">Run</code>. Premaknite kazalec na vsako vrstico, ki vsebuje kodo, in ponovite.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"rgbif"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rgbif)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Napake povezane z R paketi in kako jih rešiti
</div>
</div>
<div class="callout-body-container callout-body">
<p>Če vam R javi napako:</p>
<ul>
<li><code>Error in library(...) : there is no package called ‘...’</code>: paket ni inštaliran na računalniku in morate zagnati funkcijo <code>install.packages("...")</code>, kjer <code>...</code> predstavljajo ime želenega paketa.</li>
<li><code>Error in ... : could not find function "..."</code>: paket ni aktiviran in morate zagnati funkcijo <code>library("...")</code>, kjer <code>...</code> predstavljajo ime želenega paketa.</li>
</ul>
</div>
</div>
<p>Za dostop do podatkov o pojavljanju vrst obstaja funkcija <code class="sourceCode r"><span class="fu">occ_search</span>()</code>, ki bo vzpostavila stik s strežnikom GBIF, poiskala in prenesla podatke iz baze podatkov. Za primer bomo vzeli brazdastega kita (<em>Balaenoptera physalus</em>).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="05_images/fin whale.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Braszdasti kit (Vir fotografije: https://www.flickr.com/photos/slobirdr/29414853626)</figcaption>
</figure>
</div>
<p>Funkcije ste spoznali na prvih vajah, kjer smo znotraj oklepajev natipkali ime nekega objekta, da smo dobili rezultat. Poleg objektov, ki jih ustvarimo, funkcije sprejemajo tudi druge vnose, ki jih imenujemo <code>argumenti</code>. Funkcija <code class="sourceCode r"><span class="fu">occ_search</span>()</code> ima med mnogimi možnimi argumenti, enega poimenovanega <code class="sourceCode r">scientificName <span class="ot">=</span></code>, ki je privzeto nastavljen na <code>NULL</code>. Če želimo uporabiti funkcijo <code>occ_search()</code> za iskanje pojavljanj posamezne vrste, kot je naš primet brazdastega kita, argument izenačimo z imenom iskane vrste: <code class="sourceCode r">scientificName <span class="ot">=</span> <span class="st">"Balaenoptera physalus"</span></code>. Upoštevajte, da je <strong>latinsko ime napisano v narekovajih</strong>, da ga R obravnava kot besedo. Obstaja veliko argumentov, ki bi jih lahko uporabili za izboljšanje našega iskanja (tj. <code>hasCoordinate</code>, <code>country</code>, <code>continent</code> itd.), vendar jih na tej točki ne bomo uporabili.</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Namig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Če potrebujemo informacije o posamezni funkciji, pred njeno ime natipkamo znak za vprašaj (<code>?</code>) in izpustimo narekovaje. Ko ta ukaz zaženemo, se nam bo odprlo podokno <code>Help</code> z dokumnetacijo za izbrano funkcijo.</p>
</div>
</div>
<p>Spodnja koda bo najprej odprla dokumentacijo za funkcijo <code class="sourceCode r"><span class="fu">occ_search</span>()</code> in nato shranila njen rezultate v objekt <code class="sourceCode r">physalus_gbif</code>, ki bi se moral pojaviti v vašem globalnem okolju kmalu po zagonu kode.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Naloga
</div>
</div>
<div class="callout-body-container callout-body">
<p>Kopirajte in prilepite spodnjo kodo v R skript, premaknite kazalec na prvo vrstico s kodo in kliknite <code class="sourceCode r">Run</code>. <u>Raziščite dokument, ki se bo odprl na zavihku <code>Help</code>.</u></p>
<p>Kliknite <code class="sourceCode r">Run</code> za drugo vrstico kode in preverite delovno okolje: ali je bil ustvarjen nov objekt? Ker bomo vsi vzpostavljali stik s strežnikom GBIF hkrati, lahko traja nekaj časa, da se vse zahteve obdelajo in dokončajo.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>?occ_search</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>physalus_gbif <span class="ot">&lt;-</span> <span class="fu">occ_search</span>(<span class="at">scientificName =</span> <span class="st">"Balaenoptera physalus"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Desno od imena <code class="sourceCode r">physalus_gbif</code> lahko vidite kakšen tip R objekta je: to je seznam s 5 elementi. Če kliknete majhno modro ikono levo od <code class="sourceCode r">physalus_gbif</code>, bo njegova vsebina prikazana spodaj. Vidite lahko, da smo dejansko prenesli veliko podatkov. Obstajajo trije seznami, imenovani <code>meta</code>, <code>hierarchy</code> in <code>media</code> (daleč spodaj), in tabela poimenovana <code>data</code>. Peti element sploh ni naveden, saj imajo prvi štirje toliko vsebine, da njegova vsebina ni prikazana. Lahko bi raziskali vse te elemente, vendar bomo pogledali samo del <code>data</code>, kjer so shranjene koordinate in druge informacije o pojavljanjih brazdastega kita.</p>
<p>V tabeli <code>data</code> je 500 opažanj braszdastih kitov, kar pa ni nujno dejansko število pojavljanj v GBIF bazi podatkov. Za preprečitev (pre)obremenitve strežnika je privzeto prenesenih le 500 pojavljanj. Za brazdaste kite je v GBIF bazi podatkov kar 113321 pojavljanj (preverite lahko <a href="https://www.gbif.org/species/2440718">tukaj</a>). Če želimo spremeniti število prenesenih pojavljanj, dodamo argument <code>limit =</code> in izberemo želeno število (največja omejitev prenosa je <em>100000 pojavljanj</em>).</p>
<p>Na zaslonu lahko vidite znak za dolar (<code>$</code>) pred imenom elementa. To ni naključje, saj nam pove, da lahko do tega dela seznama dostopamo tako, da za njegovim imenom dodamo <code>$data</code>. Rezultat te operacije bomo shranili v še en nov objekt, ki ga bomo poimenovali <code class="sourceCode r">physalus_data</code>. To je tabela, v kateri so vsi potrebni podatki za nadaljevanje vaje.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Naloga
</div>
</div>
<div class="callout-body-container callout-body">
<p>Kopirajte in prilepite spodnjo kodo v R skript, premaknite kazalec na prvo vrstico s kodo in kliknite <code class="sourceCode r">Run</code>. Preverite svoj delovni imenik, če se po drugem ukazu v njem nahaja novo ime.</p>
<p>Kliknite na ime <code>physalus_data</code>, da se vam odpre tabela v pregled. V naslednjih nekaj minutah raziščite podatke in razmislite, ali so <u>kateri od stolpcev še posebej pomembni za nadaljnje delo.</u></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>physalus_gbif <span class="ot">&lt;-</span> <span class="fu">occ_search</span>(<span class="at">scientificName =</span> <span class="st">"Balaenoptera physalus"</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">limit =</span> <span class="dv">1500</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>physalus_data <span class="ot">&lt;-</span> physalus_gbif<span class="sc">$</span>data </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Vprašanja v razmislek:</p>
<ul>
<li>Ali je <code class="sourceCode r">physalus_data</code> res tabela (ali tibble), kot je bil element <code>$data</code> v <code class="sourceCode r">physalus_gbif</code>?</li>
<li>Koliko vrstic in stolpcev ima tabela <code class="sourceCode r">physalus_data</code>?</li>
</ul>
<p>Imate vi kakšno vprašanje?</p>
<hr>
</section>
<section id="izbiranje-stolpcev-in-filtriranje-podatkov" class="level2">
<h2 class="anchored" data-anchor-id="izbiranje-stolpcev-in-filtriranje-podatkov">Izbiranje stolpcev in filtriranje podatkov</h2>
<p>Vse v R-u je mogoče narediti na več načinov. Mi si bomo ogledali filtriranje (z uporabo pogoja in ohranitev podmnožice opazovanj – vrstic) in izbiranje (ohranjanje samo ključnih stolpcev) delov naših podatkov s paketom <code class="sourceCode r">dplyr</code>. R paket <code class="sourceCode r">dplyr</code> je zelo primeren za R začetnike, saj je zelo intuitiven za uporabo, a kljub temu zelo uporaben in zmogljiv. Spomnite se od začetka vaj, da moramo paket najprej inštalirati in nato aktivirati, da lahko uporabimo njegove funkcije.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Naloga
</div>
</div>
<div class="callout-body-container callout-body">
<p>Kopirajte in prilepite spodnjo kodo v R skript, premaknite kazalec na prvo vrstico s kodo in kliknite <code class="sourceCode r">Run</code>. Ponovite še za drugo vrstico.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Za <strong>izbiranje</strong> stolpcev iz tabel uporabljamo funkcijo <code class="sourceCode r"><span class="fu">select</span>()</code>, ki potrebuje vsaj dva argumenta: ime podatkovnega objekta, iz katerega želimo izbrati, in ime vsaj stolpca, ki ga želimo izbrati. S <code class="sourceCode r"><span class="fu">select</span>()</code> <strong>lahko izberemo več stolpcev naenkrat</strong>. Od več kot 100 stolpcev, ki smo jih prenesli iz baze GBIF, imajo le nekateri v tem trenutku za nas pomembne podatke: npr. stolpca s koordinatami (<code>decimalLatitude</code>, <code>decimalLongitude</code>), stolpec z državo pojavljanja (<code>country</code>), stolpec z napako v koordinatah (<code>coordinateUncerttaintyInMeters</code>).</p>
<p>Za <strong>filtriranje</strong> po vrednostih vrstic uporabljamo funkcijo <code class="sourceCode r"><span class="fu">filter</span>()</code>, ki prav tako sprejme dva argumenta: ime podatkovnega objekta, ki ga želimo izbrati iz in izraz, na podlagi katerega želimo filtrirati. Na primer, ne želimo opažanj brazdastih kitov z veliko napako, kajne? Če želimo obdržati samo tiste s 5 km ali manj, moramo preprosto določiti ime stolpca <code>coordinateUncerttaintyInMeters</code> in pogoj filtriranja (<code>&lt; 5000</code>). 5 km ni tako slabo glede na gibalne sposobnosti kitov plavutatih, kajne? Rezultate izbiranja stolpcev in filtriranja bomo shranili v objekt <code class="sourceCode r">physalus_data</code>, kar bo prepisalo izvirni objekt.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>physalus_data <span class="ot">&lt;-</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(physalus_data,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>         species,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>         decimalLatitude,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>         decimalLongitude,</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>         coordinateUncertaintyInMeters,</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>         country)</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>physalus_data <span class="ot">&lt;-</span> </span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(physalus_data,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>         coordinateUncertaintyInMeters <span class="sc">&lt;</span> <span class="dv">5000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Opozorilo
</div>
</div>
<div class="callout-body-container callout-body">
<p>Funkciji <code class="sourceCode r"><span class="fu">select</span>()</code> in <code class="sourceCode r"><span class="fu">filter</span>()</code> imata zelo generični imeni in sta definirani v različnih R paketih. Odvisno od tega, kateri paket smo nazadnje aktivirali s funkcijo <code class="sourceCode r"><span class="fu">library</span>()</code>, R izbere verzijo funkcije, ki jo bo uporabil. Lahko se zgodi, da po zagonu kode ne bomo dobili željenih rezultatov. V tem primeru je zgornji razlog napogojsteši krivec.</p>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Namig
</div>
</div>
<div class="callout-body-container callout-body">
<p>Če se želimo izogniti tem težavam, lahko R-u <em>a priori</em> povemo funkcijo iz katerega paketa želimo uporabiti, tako da pred funckijo napišemo ime paketa in dvojno dvopičje. Na primer, <code class="sourceCode r"><span class="fu">select</span>()</code> ali <code class="sourceCode r"><span class="fu">filter</span>()</code> iz paketa <code class="sourceCode r">dplyr</code>:</p>
<ul>
<li><code class="sourceCode r">dplyr<span class="sc">::</span><span class="fu">filter</span>()</code>,</li>
<li><code class="sourceCode r">dplyr<span class="sc">::</span><span class="fu">select</span>()</code>.</li>
</ul>
</div>
</div>
</section>
<section id="interaktivni-zemljevidi-paketa-leaflet" class="level2">
<h2 class="anchored" data-anchor-id="interaktivni-zemljevidi-paketa-leaflet">Interaktivni zemljevidi paketa <code class="sourceCode r">leaflet</code></h2>
<p>Paket <code class="sourceCode r">leaflet</code> nam omogoča enostavno kreiranje interaktivnih zemljevidov. Osnovna funkcija, s katero zaženemo tak zemljevid je <code class="sourceCode r"><span class="fu">leaflet</span>()</code> in znotraj oklepajev navedemo, kateri podatkovni objekt želimo prikazati na zemljevidu. Sloje zemljevidu dodajamo tako, da na koncu vrstice uporabimo operator <code class="sourceCode r"><span class="sc">%&gt;%</span></code>, kar R razumemo kot: k prejšnjim ukazom dodaj tudi naslednjega. S funkcijo <code class="sourceCode r"><span class="fu">addProviderTiles</span>()</code> določimo ozadje našega zemljevida. Izbiramo lahko med številnimi možnostmi, ki si jih lahko ogledate <a href="http://leaflet-extras.github.io/leaflet-providers/preview/">tu</a>. Za začetek bomo uporabili ozadje <code class="sourceCode r"><span class="st">"Esri.WorldImagery"</span></code>, tako da definiramo <code class="sourceCode r">provider <span class="ot">=</span> <span class="st">"Esri.WorldImagery"</span></code>. Lahko pa ga enostavno tudi zamenjamo, npr. s <code class="sourceCode r">provider <span class="ot">=</span> <span class="st">"OpenTopoMap"</span></code>. Nato ponovimo operator <code class="sourceCode r"><span class="sc">%&gt;%</span></code> in s funkcijo <code class="sourceCode r"><span class="fu">addCircleMarkers</span>()</code> dodamo točke na naš zemljevid. Ta funkcija zahteva, da določimo, kateri stolpcev v podatkih je geografska dolžina (<code class="sourceCode r">lng <span class="ot">=</span> <span class="er">~</span></code>) in kateri geografska širina (<code class="sourceCode r">lat <span class="ot">=</span> <span class="er">~</span></code>). Leaflet zahteva, da pred imeni stolpcev iz tabele dodamo znak <code class="sourceCode r"><span class="sc">~</span></code>.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Naloga
</div>
</div>
<div class="callout-body-container callout-body">
<p>Kopirajte in prilepite spodnjo kodo v R skript, premaknite kazalec na prvo vrstico s kodo in kliknite <code class="sourceCode r">Run</code>. Premaknite kazalec na vsako vrstico, ki vsebuje kodo, in ponovite. Koda, ki se začne z <code>leaflet(physalus_data)</code>, se mora zagnati od začetka do konca po enem kliku na <code class="sourceCode r">Run</code>.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"leaflet"</span>) </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(physalus_data) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addProviderTiles</span>(<span class="st">"Esri.WorldImagery"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addCircleMarkers</span>(</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">lng =</span> <span class="sc">~</span> decimalLongitude,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">lat =</span> <span class="sc">~</span> decimalLatitude)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-e8dde4fc338c4f80d98d" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e8dde4fc338c4f80d98d">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[27.216506,27.236072,33.61797,33.62685,33.487337,33.482548,33.490328,33.436895,33.44015,33.433327,33.601635,33.605817,33.542677,33.546603,33.546738,33.545587,33.543295,33.543295,33.549765,25.887477,25.887102,25.886765,32.571813,-61.064495,-61.129025,-63.285664,24.413979,48.871672,52.593966,52.65845,49.870605,-54.172445,-54.197826,-54.260208,36.827993,36.827993,36.827993,52.656597,52.656597,52.656597,52.656597,52.656597,71.168373,71.168373,71.171093,68.345079,71.174238,41.041245,41.041245,70.379913,70.379913,73.944633,71.69788800000001,74.69801099999999,75.098668,71.69788800000001,73.94478100000001,33.337538,70.540891,70.388322,71.193054,70.542481,75.878578,33.725603,70.542678,70.492788,71.091168,70.54131,70.401323,71.06360100000001,70.375136,70.375136,45.069637,51.809203,43.531171,45.026711,45.565548,66.002171,39.2,43.54017,70.97623400000001,53.322884,42.809856,51.562332,79.7864,48.271073,44.943682,57.089817,33.586005,33.578737,33.620022,33.62035,33.578215,36.957265,32.7907,33.0288,33.0121,32.9176,32.9031,33.0198,32.6942,32.8776,32.8641,33.390935,33.376262,33.696993,33.630332,33.632387,33.603347,33.589955,33.633473,33.633163,33.609223,33.605058,33.604263,33.599968,33.600325,33.632662,33.626527,33.621468,33.63456,33.62095,33.631388,33.639373,33.63845,33.635743,33.634377,33.65835,26.117721,36.847374,36.860937,36.893614,36.884051,36.911437,36.840444,32.7401,33.833333,43.2186,42.9962,42.93694,42.9337,68.900375,49.615713,25.939772,32.8032,32.9383,33.7083,33.60955,33.624205,39.75292,40.75472,43.20572,42.25943,42.24945,42.1687,42.17142,40.34336,70.055559,41.18997,41.71863,42.36044,42.26074,41.81622,41.10223,41.08487,41.182,41.18185,42.38775,42.36741,42.347,42.25576,42.22955,42.23679,42.2243,42.16235,42.16583,42.125,42.16774,42.1709,42.4982,42.50785,42.65786,42.63706,42.67384,42.75099,42.75103,42.73505,42.75113,42.75878,42.79921,42.80045,42.80043,42.78402,42.85098,42.83761,42.90007,40.24432,40.26605,41.10737,43.165264,36.766003,36.766003,36.790025,36.790025,36.811338,36.811338,36.812268,36.810703,36.812233,36.750252,36.808053,36.808965,36.671972,36.671972,53.267735,42.15082,42.1518,42.2013,42.20098,42.18002,42.20044,42.24537,41.92879,41.59058,41.59425,41.57558,41.56849,41.56916,41.5731,41.63122,47.32966,47.35313,47.35854,47.33381,47.35376,47.4131,47.25031,47.25038,47.40548,47.4105,47.43912,47.33838,47.34911,47.45204,47.46478,47.46371,47.47166,47.39152,47.45624,47.44909,47.43941,47.42292,47.38372,47.35166,47.33149,47.44916,47.48865,47.40833,47.4785,47.55766,47.57446,47.55833,47.42752,47.40396,47.42468,47.45858,47.45759,47.46252,47.46915,47.48382,47.50371,47.41881,47.42969,47.65344,47.64547,47.65433,47.64349,47.7194,47.74331,47.56638,47.55808,47.48352,47.4531,47.48684,47.54221,47.56874,47.35949,47.36245,47.35934,47.32149,47.41234,40.0489,40.35991,40.37329,40.4144,40.715,40.85295,40.92209,40.50274,40.16686,40.25128,40.26109,40.66397,40.57884,40.23184,40.25265,40.25951,40.26782,40.35038,40.52439,40.52722,40.53334,40.6671,40.66685,40.66684,40.48251,40.52939,40.7014,40.76717,32.9016,32.8548,32.7157,32.7368,32.9724,32.8874,33.1675,33.1446,32.8514,32.7523,32.8248,32.8701,32.9386,7.675134,42.706758,77.169945,70.969292,77.5398,77.167798,42.889206,42.951199,42.968613,33.211513,33.22074,33.216617,33.217213,33.207585,33.212367,24.63595,24.63595,24.63595,24.63595,24.63595,36.817,41.63734,41.63734,41.62377,42.11942,42.15734,42.15831,42.18325,42.18049,42.19638,42.25547,42.24735,41.87003,41.80047,41.60023,41.5758,41.43337,41.48714,41.5031,41.51712,41.52412,41.70265,41.70411,41.64251,41.52571,41.45081,41.31765,41.15556,41.22446,41.30334,41.11641,42.14044,42.22338,42.21284,42.21469,42.22039,42.16655,42.15078,42.39545,42.0356,41.86874,42.06752,41.86921,41.85296,42.15051,42.25084,42.85078,43.14997,41.0888,40.38078,40.38265,40.38987,43.401,43.41824,43.50333,43.45686,43.5608,43.61474,42.57943,42.09925,41.68208,41.70758,41.68176,41.61295,41.7231,41.16584,40.01589,42.97588,42.82572,42.59354,41.78796,41.78932,41.79338,29.168555,40.86697,40.843672,40.804787,40.824063,40.835877,40.81876,40.801595,40.79799,40.784663,40.78173,40.773303,40.775642,40.867008,40.968647,40.869508,40.821265,40.822712,40.82475,40.861735,42.905903,42.898788,42.890762,42.899849,42.909241,24.569733,24.569733,24.569733,24.569733,58.209184,42.12504,42.12504,42.12492,42.27964,42.33144,42.37542,42.47492,42.47502,42.52504,42.52487,42.57548,42.24164,43.00151,42.75176,42.94036,42.86475,42.79558,42.80247,42.98742,42.49523,42.72898,42.74287,42.73969,43.20046,43.10062,40.83354,40.70711,42.02036,42.19936,42.12075,42.24901,42.17584,42.17219,41.92929,41.89275,79.64498,74.541246,69.234932,58.188555,58.226514,69.35976100000001,53.172375,36.009616,78.172096,42.93132,42.791576,42.886696,42.887646,58.261869,57.903841,57.956753,57.959629,57.959589,38.23421,58.220401,42.09528,42.78025,42.04028,42.11217,43.18983,42.32828,58.30612,58.360544,58.224465,58.215969,78.31564400000001,76.62978200000001,78.122409,53.159963,44.938027,36.008159,36.010409,36.014424,36.012852,36.012232,36.014363,56.154444,58.179941,58.187675,58.276281,57.61703,53.686596,33.644015,33.64453,51.534189,51.534189,51.534615,32.9792,32.9665,32.9166,32.8529,32.9159,32.8297,32.8385,32.8243,33.0103,33.0416,43.665089,36.635508,36.661567,33.641923,33.645777,33.64752,33.647575,33.642517,33.646065,33.64231,33.641542,33.637242,33.63972,33.644837,33.652605,33.651602,33.620245,33.63749,33.637303,33.63233,33.631563,33.631563,33.633242,33.716277,33.716432,33.721218,33.720605,33.720605,33.71914,33.719507,33.653598,43.13904,70.052899,70.10194,33.645602,33.61727,33.61727,33.618457,34.922953,33.626743,33.626743,33.626563,33.633238,33.63215,33.63215,41.59997,33.659085,33.66879,33.66911,33.707717,35.181902,36.816159,36.8621,36.874151,37.018855,36.970251,37.074662,37.062921,40.90858,40.90441,40.75227,40.7662,44.12588,38.94308,39.05504,42.00864,41.98856,42.0543,42.0593,42.05807,42.07329,37.99,37.9,33.714022,33.71411,33.551815,33.620568,37.384317,36.58959,41.06378,41.06546,39.26151,39.25604,39.02354,40.76907,38.92,33.713693,33.71368,39.901608,42.34156,42.35021,42.28782,40.23551,40.23629,40.75909,38.85,39.89,39.9,39.9,39.9,33.677118,33.665252,36.817902,36.818048,36.85391,36.853808,33.609693,33.635035,33.636748,33.645352,38.85622,38.86012,40.13616,42.47323,42.48252,42.47079,42.47216,42.36582,42.36588,42.36676,42.37394,42.31082,42.32279,42.33511,42.33949,40.48969,40.27686,40.27333,40.26583,39.9,70.09714200000001,73.57970899999999,70.06131000000001,46.876956,36.786662,36.782958,36.782659,36.810892,36.805438,36.805438,33.66461,43.482083,43.466883,43.487017,36.810144,36.810236,36.810236,40.70891,40.69291,40.69669,40.6707,40.5791,40.58693,40.41875,40.40873,40.59852,42.27346,42.27675,42.27581,42.22565,41.13725,41.18036,41.18281,41.22835],[-112.113799,-112.110772,-118.248265,-118.256383,-118.234225,-118.241205,-118.236167,-118.289422,-118.283343,-118.294013,-118.292185,-118.295262,-118.356892,-118.353588,-118.353573,-118.350062,-118.348447,-118.348447,-118.3602,-111.255048,-111.255282,-111.255463,-16.915865,-54.535603,-54.551823,-56.804317,-110.42298,-64.20573899999999,-128.490903,-128.451783,0.717262,-35.567303,-35.60791,-35.745136,-121.961465,-121.961465,-121.961465,-128.451922,-128.451922,-128.451922,-128.451922,-128.451922,25.781972,25.781972,25.712469,13.846533,25.796165,1.908875,1.908875,31.119308,31.119308,-7.762064,-8.259831,-5.906265,-5.031801,-8.259831,-7.762275,-117.615337,30.646107,31.179185,25.642722,30.63929,-3.030216,-118.182519,30.654272,30.632111,28.221114,30.643672,31.188105,28.280834,31.097914,31.097914,-66.93297800000001,-10.285053,9.044495,-4.238235,-4.426687,-18.448697,0.41,9.196129000000001,26.319641,-129.049904,6.351774,-8.459013000000001,14.427425,-69.46538,-66.94592400000001,-134.765747,-118.396563,-118.412457,-118.31983,-118.319532,-118.37138,-75.993966,-118.9013,-118.7691,-118.929,-119.103,-118.8664,-118.9611,-118.7901,-118.9592,-118.7277,-117.850293,-117.848153,-118.401412,-118.297102,-118.291467,-118.27836,-118.297248,-118.336235,-118.33557,-118.295498,-118.307815,-118.323405,-118.27188,-118.271518,-118.299337,-118.307662,-118.31528,-118.294178,-118.315378,-118.361565,-118.371552,-118.37163,-118.368833,-118.366272,-118.381473,-111.292132,-75.632795,-75.757091,-75.885198,-75.65127200000001,-75.770079,-75.637559,-118.9008,-118.483333,-70.0951,-70.37737,-70.07026999999999,-70.05278,14.55613,-124.06398,-111.112949,-118.9874,-118.853,-118.5891,-118.398027,-118.429762,-73.78336,-69.93394000000001,-70.16004,-70.27145,-70.31361,-70.30933,-70.33739,-73.25015,29.846364,1.744938,-69.54841,-70.21527,-67.31979,-69.68459,-70.70567,-70.34959000000001,-70.18443000000001,-70.22292,-70.37634,-70.3625,-70.34045,-70.55416,-70.30273,-70.33622,-70.32714,-70.33977,-70.35001,-70.29836,-70.51958,-70.54858,-70.59481,-70.61190999999999,-70.47495000000001,-70.39618,-70.53686999999999,-70.56753999999999,-70.53316,-70.5086,-70.33501,-70.32623,-70.28536,-70.36921,-70.41182999999999,-70.42986000000001,-70.29456999999999,-70.30173000000001,-70.11054,-71.56634,-71.51900000000001,-69.4671,10.044085,-122.010727,-122.010727,-121.8628,-121.8628,-121.960197,-121.960197,-122.040147,-122.048993,-122.037483,-121.928325,-122.002257,-121.997252,-121.895949,-121.895949,-129.1278,-70.56335,-70.07908999999999,-70.25684,-70.45533,-70.46826,-70.52964,-70.30692000000001,-69.55497,-69.64255,-69.6345,-69.62278000000001,-69.59551,-69.60317999999999,-69.58815,-69.31801,-63.15816,-63.10807,-63.10835,-63.08458,-63.08456,-63.08492,-63.24273,-63.2432,-63.2514,-63.28175,-63.33161,-63.33148,-63.34889,-63.41894,-63.4189,-63.4965,-63.5019,-63.11729,-63.23349,-63.20041,-63.20007,-63.19999,-63.13157,-63.19926,-63.20697,-63.28359,-63.2836,-63.36638,-63.53329,-63.53354,-63.53341,-63.45039,-63.45026,-63.47575,-63.43435,-63.36641,-63.3088,-63.29949,-63.2158,-63.22589,-63.28328,-63.36686,-63.36689,-63.36719,-63.46507,-63.46766,-63.4747,-63.45734,-63.44121,-63.28291,-63.2829,-63.30745,-63.28281,-63.20083,-63.27906,-63.26887,-63.08828,-63.06216,-63.55107,-63.55123,-63.63618,-71.05028,-71.21707000000001,-71.29989,-71.71702000000001,-71.57366,-71.42292,-71.34676,-69.36668,-69.29783,-69.28357,-69.26808,-69.27943,-69.19974000000001,-69.11673999999999,-69.11673999999999,-69.11673,-69.11673999999999,-69.03312,-68.78316,-68.78316,-68.78318,-68.75067,-68.72152,-68.71877000000001,-68.69986,-68.61678999999999,-68.68252,-68.80565,-118.9063,-118.7089,-118.6855,-118.6999,-119.0149,-118.9496,-118.9991,-118.8438,-118.8239,-118.8532,-118.6627,-119.049,-118.9628,-81.477429,5.825392,-3.581838,26.682222,-3.262939,-3.584348,5.911806,5.90768,5.882295,-118.054318,-118.063095,-118.059318,-118.06024,-118.057442,-118.05516,-110.3688,-110.3688,-110.3688,-110.3688,-110.3688,-122.054,-69.48492,-69.48492,-69.51532,-67.83319,-68.57629,-68.56197,-68.5659,-68.52298999999999,-68.56016,-68.49809,-68.67377,-69.4285,-69.58205,-69.34757999999999,-69.40369,-69.3781,-69.25493,-69.21823000000001,-69.18595999999999,-69.16989,-68.75566999999999,-68.75227,-68.54492999999999,-68.81644,-68.98891,-69.29393,-69.30992999999999,-69.15356,-68.97369,-69.04601,-67.31083,-66.66431,-66.63113,-66.62748999999999,-66.60584,-66.69596,-66.7047,-67.6664,-68.08322,-68.08324,-68.16674999999999,-68.25002000000001,-68.33365000000001,-70.30959,-70.28494000000001,-70.25454000000001,-70.04738999999999,-69.65006,-69.48367,-69.48367,-69.39989,-70.10563999999999,-70.07949000000001,-70.1031,-70.06744,-69.90647,-69.86709999999999,-70.13030000000001,-68.98454,-69.59509,-69.19665000000001,-69.25793,-69.40797999999999,-68.79855000000001,-69.37445,-70.96598,-70.37238000000001,-70.23645,-70.54976000000001,-69.48609999999999,-69.48296000000001,-69.47357,-113.1455,-71.75024999999999,-71.741613,-71.85454,-71.83256299999999,-71.739773,-71.83514,-71.846648,-71.845108,-71.841645,-71.840418,-71.840355,-71.84562699999999,-71.76546999999999,-71.98204200000001,-71.771593,-71.85098000000001,-71.850078,-71.849237,-71.76584800000001,5.823839,5.893983,5.871759,5.900699,5.82069,-110.502317,-110.502317,-110.502317,-110.502317,-6.100419,-70.12717000000001,-70.12717000000001,-70.09596999999999,-70.12327000000001,-70.06891,-70.50543999999999,-70.04449,-70.14886,-70.51913999999999,-70.40635,-70.36141000000001,-69.89758,-69.56084,-69.23066,-69.178,-69.03439,-69.01503,-69.0491,-68.86951999999999,-69.12958999999999,-69.19694,-69.60062000000001,-69.63321999999999,-70.37366,-70.37701,-71.54714,-71.48308,-69.80934999999999,-66.57838,-66.67735,-66.95095999999999,-66.99151999999999,-66.99354,-68.88055,-69.11241,11.307301,19.812155,19.431144,-6.031255,-5.917925,16.124513,-129.433904,-5.563545,14.310557,5.646917,5.78992,5.766208,5.733225,-5.966268,-152.718158,-152.654052,-152.657538,-152.657568,-123.58782,-5.921589,-70.12412999999999,-69.67419,-70.23833,-70.13939999999999,-69.41513,-70.04604,-5.925856,-6.008148,-5.919079,-6.126786,11.585249,10.624114,14.072342,-129.421432,-66.971661,-5.587123,-5.57282,-5.587042,-5.590985,-5.586647,-5.587487,-168.482778,-5.965994,-6.10466,-5.968906,-6.088758,7.106216,-118.30824,-118.310182,3.434519,3.434519,3.434385,-118.8671,-118.9474,-118.9278,-118.7492,-118.7389,-118.7661,-118.7623,-118.8625,-118.9843,-118.9573,-2.786771,-122.08261,-122.092522,-118.328612,-118.333032,-118.334468,-118.338088,-118.329957,-118.322657,-118.305287,-118.303573,-118.301977,-118.303615,-118.305557,-118.339243,-118.340162,-118.383082,-118.359297,-118.359435,-118.376802,-118.378348,-118.378348,-118.37701,-118.435755,-118.435517,-118.427213,-118.428415,-118.428415,-118.427383,-118.430187,-118.571908,-70.02966000000001,19.934245,20.085216,-118.27702,-118.293593,-118.293593,-118.293983,-121.45874,-118.273312,-118.273312,-118.278992,-118.266677,-118.266173,-118.266173,-69.92681,-118.297317,-118.336243,-118.336387,-118.38754,-2.424345,-75.617802,-75.549302,-75.496116,-75.623745,-75.497145,-75.49114899999999,-75.476423,-70.29989999999999,-70.28259,-70.21693,-70.24135,-67.60285,-73.83309,-74.18378,-70.21766,-70.22099,-69.89458999999999,-69.87864999999999,-69.85680000000001,-69.87898,-0.59,-0.58,-118.395008,-118.398565,-118.318268,-118.315205,0.826817,-75.68022999999999,-71.49535,-71.50613,-73.93343,-73.91316999999999,-74.04786,-71.4509,-0.01,-118.42901,-118.429028,0.686232,-70.58347000000001,-70.33014,-70.17674,-71.06667,-71.05243,-71.62038,0.15,0.65,0.6899999999999999,0.7,0.7,-118.32832,-118.321885,-122.003633,-122.007662,-122.16219,-122.162052,-118.360537,-118.41421,-118.420227,-118.428773,-74.13326000000001,-74.16558999999999,-71.06646000000001,-70.47198,-70.47166,-70.46227,-70.45115,-70.64069000000001,-70.63806,-70.60138999999999,-70.30064,-70.24199,-70.3261,-70.65573999999999,-70.66254000000001,-71.40172,-71.01708000000001,-71.02009,-71.03440999999999,0.6899999999999999,29.373221,22.91843,29.943948,-4.386178,-122.006248,-122.014744,-122.015808,-122.057252,-122.065543,-122.065543,-118.32137,-69.61754999999999,-69.595467,-69.605617,-122.045886,-122.046294,-122.046294,-71.51092,-71.46608999999999,-71.48623000000001,-71.51833000000001,-71.34872,-71.33054,-71.34949,-71.30843,-71.23277,-70.67975,-70.59029,-70.39398,-70.28281,-69.17363,-69.07586000000001,-69.07034,-68.96941],10,null,null,{"interactive":true,"className":"","stroke":true,"color":"#03F","weight":5,"opacity":0.5,"fill":true,"fillColor":"#03F","fillOpacity":0.2},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-63.285664,79.7864],"lng":[-168.482778,31.188105]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<hr>
<p>Zemljevid pojavljanj lahko še malo vizualno uredimo. Na primer, spremenimo barvo, prosojnost ali velikost točk, ali pa odstranimo obrobo. Vsaka od teh lastnosti je definirana s svojim argumentom, ki ga dodamo znotraj oklepajev funkcije <code>addCircleMarkers()</code>:</p>
<ul>
<li>s <code>color =</code> lahko spremenimo barvo točk. Barve, ki jih lahko uporabimo najdete <a href="https://r-charts.com/colors/">tu</a>, delujejo pa tiste, ki nimajo števila na koncu imena.</li>
<li>z <code class="sourceCode r">radius <span class="ot">=</span> <span class="dv">5</span></code> lahko spremenimo velikost točk, uporabimo lahko pozitivna števila,</li>
<li>s <code class="sourceCode r">stroke <span class="ot">=</span> <span class="cn">FALSE</span></code> lahko odstranimo obrobo točk,</li>
<li>s <code class="sourceCode r">fillOpacity <span class="ot">=</span> <span class="fl">0.7</span></code> spreminjamo transparentnost oziroma prosojnost točk, izberemo lahko vrednosti med 0 in 1:</li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Naloga
</div>
</div>
<div class="callout-body-container callout-body">
<p>Kopirajte in prilepite spodnjo kodo v R skript, premaknite kazalec na prvo vrstico s kodo in kliknite <code class="sourceCode r">Run</code>. Koda, ki se začne z <code>leaflet(physalus_data)</code>, se mora zagnati od začetka do konca po enem kliku na <code class="sourceCode r">Run</code>.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">leaflet</span>(physalus_data) <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addProviderTiles</span>(<span class="st">"Esri.WorldImagery"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">addCircleMarkers</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">lng =</span> <span class="sc">~</span> decimalLongitude,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">lat =</span> <span class="sc">~</span> decimalLatitude,</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">"deepskyblue"</span>,</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">stroke =</span> <span class="cn">FALSE</span>,</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">radius =</span> <span class="dv">8</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">fillOpacity =</span> <span class="fl">0.7</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>        )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="leaflet html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-b82aff3c5b8a4e4bdd7c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b82aff3c5b8a4e4bdd7c">{"x":{"options":{"crs":{"crsClass":"L.CRS.EPSG3857","code":null,"proj4def":null,"projectedBounds":null,"options":{}}},"calls":[{"method":"addProviderTiles","args":["Esri.WorldImagery",null,null,{"errorTileUrl":"","noWrap":false,"detectRetina":false}]},{"method":"addCircleMarkers","args":[[27.216506,27.236072,33.61797,33.62685,33.487337,33.482548,33.490328,33.436895,33.44015,33.433327,33.601635,33.605817,33.542677,33.546603,33.546738,33.545587,33.543295,33.543295,33.549765,25.887477,25.887102,25.886765,32.571813,-61.064495,-61.129025,-63.285664,24.413979,48.871672,52.593966,52.65845,49.870605,-54.172445,-54.197826,-54.260208,36.827993,36.827993,36.827993,52.656597,52.656597,52.656597,52.656597,52.656597,71.168373,71.168373,71.171093,68.345079,71.174238,41.041245,41.041245,70.379913,70.379913,73.944633,71.69788800000001,74.69801099999999,75.098668,71.69788800000001,73.94478100000001,33.337538,70.540891,70.388322,71.193054,70.542481,75.878578,33.725603,70.542678,70.492788,71.091168,70.54131,70.401323,71.06360100000001,70.375136,70.375136,45.069637,51.809203,43.531171,45.026711,45.565548,66.002171,39.2,43.54017,70.97623400000001,53.322884,42.809856,51.562332,79.7864,48.271073,44.943682,57.089817,33.586005,33.578737,33.620022,33.62035,33.578215,36.957265,32.7907,33.0288,33.0121,32.9176,32.9031,33.0198,32.6942,32.8776,32.8641,33.390935,33.376262,33.696993,33.630332,33.632387,33.603347,33.589955,33.633473,33.633163,33.609223,33.605058,33.604263,33.599968,33.600325,33.632662,33.626527,33.621468,33.63456,33.62095,33.631388,33.639373,33.63845,33.635743,33.634377,33.65835,26.117721,36.847374,36.860937,36.893614,36.884051,36.911437,36.840444,32.7401,33.833333,43.2186,42.9962,42.93694,42.9337,68.900375,49.615713,25.939772,32.8032,32.9383,33.7083,33.60955,33.624205,39.75292,40.75472,43.20572,42.25943,42.24945,42.1687,42.17142,40.34336,70.055559,41.18997,41.71863,42.36044,42.26074,41.81622,41.10223,41.08487,41.182,41.18185,42.38775,42.36741,42.347,42.25576,42.22955,42.23679,42.2243,42.16235,42.16583,42.125,42.16774,42.1709,42.4982,42.50785,42.65786,42.63706,42.67384,42.75099,42.75103,42.73505,42.75113,42.75878,42.79921,42.80045,42.80043,42.78402,42.85098,42.83761,42.90007,40.24432,40.26605,41.10737,43.165264,36.766003,36.766003,36.790025,36.790025,36.811338,36.811338,36.812268,36.810703,36.812233,36.750252,36.808053,36.808965,36.671972,36.671972,53.267735,42.15082,42.1518,42.2013,42.20098,42.18002,42.20044,42.24537,41.92879,41.59058,41.59425,41.57558,41.56849,41.56916,41.5731,41.63122,47.32966,47.35313,47.35854,47.33381,47.35376,47.4131,47.25031,47.25038,47.40548,47.4105,47.43912,47.33838,47.34911,47.45204,47.46478,47.46371,47.47166,47.39152,47.45624,47.44909,47.43941,47.42292,47.38372,47.35166,47.33149,47.44916,47.48865,47.40833,47.4785,47.55766,47.57446,47.55833,47.42752,47.40396,47.42468,47.45858,47.45759,47.46252,47.46915,47.48382,47.50371,47.41881,47.42969,47.65344,47.64547,47.65433,47.64349,47.7194,47.74331,47.56638,47.55808,47.48352,47.4531,47.48684,47.54221,47.56874,47.35949,47.36245,47.35934,47.32149,47.41234,40.0489,40.35991,40.37329,40.4144,40.715,40.85295,40.92209,40.50274,40.16686,40.25128,40.26109,40.66397,40.57884,40.23184,40.25265,40.25951,40.26782,40.35038,40.52439,40.52722,40.53334,40.6671,40.66685,40.66684,40.48251,40.52939,40.7014,40.76717,32.9016,32.8548,32.7157,32.7368,32.9724,32.8874,33.1675,33.1446,32.8514,32.7523,32.8248,32.8701,32.9386,7.675134,42.706758,77.169945,70.969292,77.5398,77.167798,42.889206,42.951199,42.968613,33.211513,33.22074,33.216617,33.217213,33.207585,33.212367,24.63595,24.63595,24.63595,24.63595,24.63595,36.817,41.63734,41.63734,41.62377,42.11942,42.15734,42.15831,42.18325,42.18049,42.19638,42.25547,42.24735,41.87003,41.80047,41.60023,41.5758,41.43337,41.48714,41.5031,41.51712,41.52412,41.70265,41.70411,41.64251,41.52571,41.45081,41.31765,41.15556,41.22446,41.30334,41.11641,42.14044,42.22338,42.21284,42.21469,42.22039,42.16655,42.15078,42.39545,42.0356,41.86874,42.06752,41.86921,41.85296,42.15051,42.25084,42.85078,43.14997,41.0888,40.38078,40.38265,40.38987,43.401,43.41824,43.50333,43.45686,43.5608,43.61474,42.57943,42.09925,41.68208,41.70758,41.68176,41.61295,41.7231,41.16584,40.01589,42.97588,42.82572,42.59354,41.78796,41.78932,41.79338,29.168555,40.86697,40.843672,40.804787,40.824063,40.835877,40.81876,40.801595,40.79799,40.784663,40.78173,40.773303,40.775642,40.867008,40.968647,40.869508,40.821265,40.822712,40.82475,40.861735,42.905903,42.898788,42.890762,42.899849,42.909241,24.569733,24.569733,24.569733,24.569733,58.209184,42.12504,42.12504,42.12492,42.27964,42.33144,42.37542,42.47492,42.47502,42.52504,42.52487,42.57548,42.24164,43.00151,42.75176,42.94036,42.86475,42.79558,42.80247,42.98742,42.49523,42.72898,42.74287,42.73969,43.20046,43.10062,40.83354,40.70711,42.02036,42.19936,42.12075,42.24901,42.17584,42.17219,41.92929,41.89275,79.64498,74.541246,69.234932,58.188555,58.226514,69.35976100000001,53.172375,36.009616,78.172096,42.93132,42.791576,42.886696,42.887646,58.261869,57.903841,57.956753,57.959629,57.959589,38.23421,58.220401,42.09528,42.78025,42.04028,42.11217,43.18983,42.32828,58.30612,58.360544,58.224465,58.215969,78.31564400000001,76.62978200000001,78.122409,53.159963,44.938027,36.008159,36.010409,36.014424,36.012852,36.012232,36.014363,56.154444,58.179941,58.187675,58.276281,57.61703,53.686596,33.644015,33.64453,51.534189,51.534189,51.534615,32.9792,32.9665,32.9166,32.8529,32.9159,32.8297,32.8385,32.8243,33.0103,33.0416,43.665089,36.635508,36.661567,33.641923,33.645777,33.64752,33.647575,33.642517,33.646065,33.64231,33.641542,33.637242,33.63972,33.644837,33.652605,33.651602,33.620245,33.63749,33.637303,33.63233,33.631563,33.631563,33.633242,33.716277,33.716432,33.721218,33.720605,33.720605,33.71914,33.719507,33.653598,43.13904,70.052899,70.10194,33.645602,33.61727,33.61727,33.618457,34.922953,33.626743,33.626743,33.626563,33.633238,33.63215,33.63215,41.59997,33.659085,33.66879,33.66911,33.707717,35.181902,36.816159,36.8621,36.874151,37.018855,36.970251,37.074662,37.062921,40.90858,40.90441,40.75227,40.7662,44.12588,38.94308,39.05504,42.00864,41.98856,42.0543,42.0593,42.05807,42.07329,37.99,37.9,33.714022,33.71411,33.551815,33.620568,37.384317,36.58959,41.06378,41.06546,39.26151,39.25604,39.02354,40.76907,38.92,33.713693,33.71368,39.901608,42.34156,42.35021,42.28782,40.23551,40.23629,40.75909,38.85,39.89,39.9,39.9,39.9,33.677118,33.665252,36.817902,36.818048,36.85391,36.853808,33.609693,33.635035,33.636748,33.645352,38.85622,38.86012,40.13616,42.47323,42.48252,42.47079,42.47216,42.36582,42.36588,42.36676,42.37394,42.31082,42.32279,42.33511,42.33949,40.48969,40.27686,40.27333,40.26583,39.9,70.09714200000001,73.57970899999999,70.06131000000001,46.876956,36.786662,36.782958,36.782659,36.810892,36.805438,36.805438,33.66461,43.482083,43.466883,43.487017,36.810144,36.810236,36.810236,40.70891,40.69291,40.69669,40.6707,40.5791,40.58693,40.41875,40.40873,40.59852,42.27346,42.27675,42.27581,42.22565,41.13725,41.18036,41.18281,41.22835],[-112.113799,-112.110772,-118.248265,-118.256383,-118.234225,-118.241205,-118.236167,-118.289422,-118.283343,-118.294013,-118.292185,-118.295262,-118.356892,-118.353588,-118.353573,-118.350062,-118.348447,-118.348447,-118.3602,-111.255048,-111.255282,-111.255463,-16.915865,-54.535603,-54.551823,-56.804317,-110.42298,-64.20573899999999,-128.490903,-128.451783,0.717262,-35.567303,-35.60791,-35.745136,-121.961465,-121.961465,-121.961465,-128.451922,-128.451922,-128.451922,-128.451922,-128.451922,25.781972,25.781972,25.712469,13.846533,25.796165,1.908875,1.908875,31.119308,31.119308,-7.762064,-8.259831,-5.906265,-5.031801,-8.259831,-7.762275,-117.615337,30.646107,31.179185,25.642722,30.63929,-3.030216,-118.182519,30.654272,30.632111,28.221114,30.643672,31.188105,28.280834,31.097914,31.097914,-66.93297800000001,-10.285053,9.044495,-4.238235,-4.426687,-18.448697,0.41,9.196129000000001,26.319641,-129.049904,6.351774,-8.459013000000001,14.427425,-69.46538,-66.94592400000001,-134.765747,-118.396563,-118.412457,-118.31983,-118.319532,-118.37138,-75.993966,-118.9013,-118.7691,-118.929,-119.103,-118.8664,-118.9611,-118.7901,-118.9592,-118.7277,-117.850293,-117.848153,-118.401412,-118.297102,-118.291467,-118.27836,-118.297248,-118.336235,-118.33557,-118.295498,-118.307815,-118.323405,-118.27188,-118.271518,-118.299337,-118.307662,-118.31528,-118.294178,-118.315378,-118.361565,-118.371552,-118.37163,-118.368833,-118.366272,-118.381473,-111.292132,-75.632795,-75.757091,-75.885198,-75.65127200000001,-75.770079,-75.637559,-118.9008,-118.483333,-70.0951,-70.37737,-70.07026999999999,-70.05278,14.55613,-124.06398,-111.112949,-118.9874,-118.853,-118.5891,-118.398027,-118.429762,-73.78336,-69.93394000000001,-70.16004,-70.27145,-70.31361,-70.30933,-70.33739,-73.25015,29.846364,1.744938,-69.54841,-70.21527,-67.31979,-69.68459,-70.70567,-70.34959000000001,-70.18443000000001,-70.22292,-70.37634,-70.3625,-70.34045,-70.55416,-70.30273,-70.33622,-70.32714,-70.33977,-70.35001,-70.29836,-70.51958,-70.54858,-70.59481,-70.61190999999999,-70.47495000000001,-70.39618,-70.53686999999999,-70.56753999999999,-70.53316,-70.5086,-70.33501,-70.32623,-70.28536,-70.36921,-70.41182999999999,-70.42986000000001,-70.29456999999999,-70.30173000000001,-70.11054,-71.56634,-71.51900000000001,-69.4671,10.044085,-122.010727,-122.010727,-121.8628,-121.8628,-121.960197,-121.960197,-122.040147,-122.048993,-122.037483,-121.928325,-122.002257,-121.997252,-121.895949,-121.895949,-129.1278,-70.56335,-70.07908999999999,-70.25684,-70.45533,-70.46826,-70.52964,-70.30692000000001,-69.55497,-69.64255,-69.6345,-69.62278000000001,-69.59551,-69.60317999999999,-69.58815,-69.31801,-63.15816,-63.10807,-63.10835,-63.08458,-63.08456,-63.08492,-63.24273,-63.2432,-63.2514,-63.28175,-63.33161,-63.33148,-63.34889,-63.41894,-63.4189,-63.4965,-63.5019,-63.11729,-63.23349,-63.20041,-63.20007,-63.19999,-63.13157,-63.19926,-63.20697,-63.28359,-63.2836,-63.36638,-63.53329,-63.53354,-63.53341,-63.45039,-63.45026,-63.47575,-63.43435,-63.36641,-63.3088,-63.29949,-63.2158,-63.22589,-63.28328,-63.36686,-63.36689,-63.36719,-63.46507,-63.46766,-63.4747,-63.45734,-63.44121,-63.28291,-63.2829,-63.30745,-63.28281,-63.20083,-63.27906,-63.26887,-63.08828,-63.06216,-63.55107,-63.55123,-63.63618,-71.05028,-71.21707000000001,-71.29989,-71.71702000000001,-71.57366,-71.42292,-71.34676,-69.36668,-69.29783,-69.28357,-69.26808,-69.27943,-69.19974000000001,-69.11673999999999,-69.11673999999999,-69.11673,-69.11673999999999,-69.03312,-68.78316,-68.78316,-68.78318,-68.75067,-68.72152,-68.71877000000001,-68.69986,-68.61678999999999,-68.68252,-68.80565,-118.9063,-118.7089,-118.6855,-118.6999,-119.0149,-118.9496,-118.9991,-118.8438,-118.8239,-118.8532,-118.6627,-119.049,-118.9628,-81.477429,5.825392,-3.581838,26.682222,-3.262939,-3.584348,5.911806,5.90768,5.882295,-118.054318,-118.063095,-118.059318,-118.06024,-118.057442,-118.05516,-110.3688,-110.3688,-110.3688,-110.3688,-110.3688,-122.054,-69.48492,-69.48492,-69.51532,-67.83319,-68.57629,-68.56197,-68.5659,-68.52298999999999,-68.56016,-68.49809,-68.67377,-69.4285,-69.58205,-69.34757999999999,-69.40369,-69.3781,-69.25493,-69.21823000000001,-69.18595999999999,-69.16989,-68.75566999999999,-68.75227,-68.54492999999999,-68.81644,-68.98891,-69.29393,-69.30992999999999,-69.15356,-68.97369,-69.04601,-67.31083,-66.66431,-66.63113,-66.62748999999999,-66.60584,-66.69596,-66.7047,-67.6664,-68.08322,-68.08324,-68.16674999999999,-68.25002000000001,-68.33365000000001,-70.30959,-70.28494000000001,-70.25454000000001,-70.04738999999999,-69.65006,-69.48367,-69.48367,-69.39989,-70.10563999999999,-70.07949000000001,-70.1031,-70.06744,-69.90647,-69.86709999999999,-70.13030000000001,-68.98454,-69.59509,-69.19665000000001,-69.25793,-69.40797999999999,-68.79855000000001,-69.37445,-70.96598,-70.37238000000001,-70.23645,-70.54976000000001,-69.48609999999999,-69.48296000000001,-69.47357,-113.1455,-71.75024999999999,-71.741613,-71.85454,-71.83256299999999,-71.739773,-71.83514,-71.846648,-71.845108,-71.841645,-71.840418,-71.840355,-71.84562699999999,-71.76546999999999,-71.98204200000001,-71.771593,-71.85098000000001,-71.850078,-71.849237,-71.76584800000001,5.823839,5.893983,5.871759,5.900699,5.82069,-110.502317,-110.502317,-110.502317,-110.502317,-6.100419,-70.12717000000001,-70.12717000000001,-70.09596999999999,-70.12327000000001,-70.06891,-70.50543999999999,-70.04449,-70.14886,-70.51913999999999,-70.40635,-70.36141000000001,-69.89758,-69.56084,-69.23066,-69.178,-69.03439,-69.01503,-69.0491,-68.86951999999999,-69.12958999999999,-69.19694,-69.60062000000001,-69.63321999999999,-70.37366,-70.37701,-71.54714,-71.48308,-69.80934999999999,-66.57838,-66.67735,-66.95095999999999,-66.99151999999999,-66.99354,-68.88055,-69.11241,11.307301,19.812155,19.431144,-6.031255,-5.917925,16.124513,-129.433904,-5.563545,14.310557,5.646917,5.78992,5.766208,5.733225,-5.966268,-152.718158,-152.654052,-152.657538,-152.657568,-123.58782,-5.921589,-70.12412999999999,-69.67419,-70.23833,-70.13939999999999,-69.41513,-70.04604,-5.925856,-6.008148,-5.919079,-6.126786,11.585249,10.624114,14.072342,-129.421432,-66.971661,-5.587123,-5.57282,-5.587042,-5.590985,-5.586647,-5.587487,-168.482778,-5.965994,-6.10466,-5.968906,-6.088758,7.106216,-118.30824,-118.310182,3.434519,3.434519,3.434385,-118.8671,-118.9474,-118.9278,-118.7492,-118.7389,-118.7661,-118.7623,-118.8625,-118.9843,-118.9573,-2.786771,-122.08261,-122.092522,-118.328612,-118.333032,-118.334468,-118.338088,-118.329957,-118.322657,-118.305287,-118.303573,-118.301977,-118.303615,-118.305557,-118.339243,-118.340162,-118.383082,-118.359297,-118.359435,-118.376802,-118.378348,-118.378348,-118.37701,-118.435755,-118.435517,-118.427213,-118.428415,-118.428415,-118.427383,-118.430187,-118.571908,-70.02966000000001,19.934245,20.085216,-118.27702,-118.293593,-118.293593,-118.293983,-121.45874,-118.273312,-118.273312,-118.278992,-118.266677,-118.266173,-118.266173,-69.92681,-118.297317,-118.336243,-118.336387,-118.38754,-2.424345,-75.617802,-75.549302,-75.496116,-75.623745,-75.497145,-75.49114899999999,-75.476423,-70.29989999999999,-70.28259,-70.21693,-70.24135,-67.60285,-73.83309,-74.18378,-70.21766,-70.22099,-69.89458999999999,-69.87864999999999,-69.85680000000001,-69.87898,-0.59,-0.58,-118.395008,-118.398565,-118.318268,-118.315205,0.826817,-75.68022999999999,-71.49535,-71.50613,-73.93343,-73.91316999999999,-74.04786,-71.4509,-0.01,-118.42901,-118.429028,0.686232,-70.58347000000001,-70.33014,-70.17674,-71.06667,-71.05243,-71.62038,0.15,0.65,0.6899999999999999,0.7,0.7,-118.32832,-118.321885,-122.003633,-122.007662,-122.16219,-122.162052,-118.360537,-118.41421,-118.420227,-118.428773,-74.13326000000001,-74.16558999999999,-71.06646000000001,-70.47198,-70.47166,-70.46227,-70.45115,-70.64069000000001,-70.63806,-70.60138999999999,-70.30064,-70.24199,-70.3261,-70.65573999999999,-70.66254000000001,-71.40172,-71.01708000000001,-71.02009,-71.03440999999999,0.6899999999999999,29.373221,22.91843,29.943948,-4.386178,-122.006248,-122.014744,-122.015808,-122.057252,-122.065543,-122.065543,-118.32137,-69.61754999999999,-69.595467,-69.605617,-122.045886,-122.046294,-122.046294,-71.51092,-71.46608999999999,-71.48623000000001,-71.51833000000001,-71.34872,-71.33054,-71.34949,-71.30843,-71.23277,-70.67975,-70.59029,-70.39398,-70.28281,-69.17363,-69.07586000000001,-69.07034,-68.96941],8,null,null,{"interactive":true,"className":"","stroke":false,"color":"deepskyblue","weight":5,"opacity":0.5,"fill":true,"fillColor":"deepskyblue","fillOpacity":0.7},null,null,null,null,null,{"interactive":false,"permanent":false,"direction":"auto","opacity":1,"offset":[0,0],"textsize":"10px","textOnly":false,"className":"","sticky":true},null]}],"limits":{"lat":[-63.285664,79.7864],"lng":[-168.482778,31.188105]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<hr>
<p>Zemljevid bomo izvozili v <code>html</code> obliko, kar bo ohranilo njegove interaktivne lastnosti:</p>
<ol type="1">
<li>Klik na gumb <code>Export</code></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="05_images/Export button.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Kliknemo “Export”.</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li>Izberemo <code>Save as web page</code></li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="05_images/Save as web page.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Izberemo “Save as web page”.</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li>Določimo ime datoteke in shranimo na namizje našega računalnika</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="05_images/Save to project map.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Izberemo “Save” da shranimo na namizje.</figcaption>
</figure>
</div>
<hr>
<p>Vprašanja za razmislek:</p>
<ul>
<li>Kaj je GBIF in kako je lahko koristen za vaše raziskave/poučevanje?</li>
<li>Kakšne so pomanjkljivosti podatkov GBIF glede na to, da nekateri od njih izvirajo iz državljanske znanosti (<em>citizen science</em>)?</li>
<li>Kolikokrat morate zagnati funkcijo <code>install.packages()</code> in kolikokrat funkcijo <code>library()</code>?</li>
<li>Kateri paket in funkcije so enostavni za uporabo za filtriranje in izbiro samo podatkov, ki vas zanimajo?</li>
<li>Kateri paket in funkcije so enostavni za preprosto vizualizacijo prostorskih točk?</li>
</ul>
</section>
<section id="imate-vi-kakšno-vprašanje" class="level2">
<h2 class="anchored" data-anchor-id="imate-vi-kakšno-vprašanje">Imate vi kakšno vprašanje?</h2>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Naloga
</div>
</div>
<div class="callout-body-container callout-body">
<p><u>Če nekaj ne deluje takoj, najprej razmislite o težavi/napaki, se posvetujte s sosedom na levi, nato na desni. Če po tem še vedno ne veste, kako odpraviti težavo ali nadaljevati, vprašajte <code>google</code> ali <code>chat gpt</code> in šele nato vprašajte mene za pomoč!</u></p>
<p>Današnja naloga bo bolj zahtevna kot zadnjič. Sledite naslednjim korakom, da jo dokončate:</p>
<ol type="1">
<li><p>Izberite si eno poljubno vrsto (lahko vašo najljubšo) in poiščite <strong>njeno latinsko ime</strong>.</p></li>
<li><p>Odprite nov R skript v meniju <code class="sourceCode r">File</code> tako, da kliknete <code>New file</code> in potem <code class="sourceCode r">R script</code>. Skript bo imel ime Untitled1 (ali Untitled2, če je že odprt prazen skript). Shranite skript na namizje vašega računalnika in ga poimenujte <code>Dostop do podatkov iz portala GBIF z R: ime vaše vrste</code>.</p></li>
<li><p>Kopirajte in prilepite vso kodo, ki smo jo zagnali za primer braszdastega kita v prazno skripto. Vrstice, ki vsebujejo funkcije <code>install.packages()</code> lahko označite z znakom <code>#</code>, da se ne izvedejo ponovno, saj so paketi zdaj že inštalirani na vašem računalniku.</p></li>
<li><p>Prilagodite kodo tako, da zamenjate <code>Balaenoptera physalus</code> z izbranim imenom vrste in preimenujete <code>physalus_gbif</code> glede na ime vaše vrste (npr. <code>Liza aurata</code> &amp; <code>aurata_gbif</code>).</p></li>
<li><p>Ponastavite argument <code>limit =</code> v funkciji <code>occ_search()</code> in prenesite več kot 500 pojavljanj vrste (500 oz 1500 spremenite v številko po vaši izbiri).</p></li>
<li><p>Iz podatkovna seznama, ki se konča s končnico <code>_gbif</code> dostopajte do elementa <code>data</code> in ga shranite v nov objekt. Preimenujte glede na svojo vrsto (npr. <code>aurata_data</code>).</p>
<ol type="a">
<li>če je število pojavljanj nič ali zelo majhno (&lt; 100), ponovite postopek od 1. koraka.</li>
<li>če je &gt; 100 pojavitev vaše vrste, nadaljujte s 7. korakom.</li>
</ol></li>
<li><p>Izberite samo smiselne stolpce iz podatkovnega okvira <code>*_data</code>.</p></li>
<li><p>Filtrirajte svoje podatke in poskusite spremeniti vrednost filtriranja napake koordinat, da bo bolje ustrezala vaši vrsti (npr. 500 metrov je morda bolje za <em>Liza aurata</em>).</p></li>
<li><p>Prikažite filtrirana pojavljanja vaše vrste na <code>leaflet</code> zemljevidu. Raziščite razpoložljive osnovne zemljevide <a href="http://leaflet-extras.github.io/leaflet-providers/preview/">tukaj</a> in ga spremenite v enega po svoji izbiri (npr. zamenjajte <code>"Esri.WorldImagery</code> z drugim imenom iz seznama na spletni strani).</p></li>
<li><p>Spremenite izgled točk na vašem zemljevidu, tako da poljubno spremenite vrednosti argumentov <code>color =</code>, <code>radius =</code> in <code>fillOpacity =</code>.</p></li>
<li><p>Izvozite zemljevid v html dokument in ga naložite v nalogo na e-učilnico (lahko danes, lahko do postavljenega roka: <strong>15.11.2023</strong>).</p></li>
<li><p>Shranite obe R skripti in si ju naložite na USB ali pošljite preko e-maila, da ju lahko ponovno uporabite.</p></li>
</ol>
</div>
</div>
<hr>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Naloge za hitre:
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Na <code>leaflet</code> zemljevidu prikažite mesta iz prvih vaj in spremenite izgled točk:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>ime_mesta <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Ljubljana"</span>, <span class="st">"Maribor"</span>, <span class="st">"Koper"</span>, <span class="st">"Kranjska Gora"</span>, <span class="st">"Novo mesto"</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>geografska_sirina <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">46.047766</span>, <span class="fl">46.550613</span>, <span class="fl">45.547377</span>,  <span class="fl">46.4887160</span>, <span class="fl">45.802626</span>)</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>geografska_dolzina <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">14.507420</span>, <span class="fl">15.645263</span>, <span class="fl">13.730270</span>,  <span class="fl">13.787491</span>, <span class="fl">15.164192</span>)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>prebivalstvo <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">279631</span>, <span class="dv">94370</span>, <span class="dv">25753</span>, <span class="dv">1452</span>, <span class="dv">24183</span>)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>primorska <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>mesta <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(ime_mesta, geografska_dolzina, geografska_sirina, prebivalstvo, primorska)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Na <code>leaflet</code> zemljevidu prikažite domače kraje sošolcev iz prvih vaj in spremenite izgled točk:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>imena_sosolcev <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"___"</span>, <span class="st">"___"</span>, <span class="st">"___"</span>, <span class="st">"___"</span>) </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>starost <span class="ot">&lt;-</span> <span class="fu">c</span>(___, ___, ___, ___)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>barva_oci <span class="ot">&lt;-</span> <span class="fu">c</span>(___, ___, ___, ___)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>domaci_kraj <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"___"</span>, <span class="st">"___"</span>, <span class="st">"___"</span>, <span class="st">"___"</span>)</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>geografska_sirina_dk <span class="ot">&lt;-</span> <span class="fu">c</span>(___, ___, ___, ___)</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>geografska_dolzina_dk <span class="ot">&lt;-</span> <span class="fu">c</span>(___, ___, ___, ___)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>sosolci <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(___, <span class="co"># imena</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>                      ___, <span class="co"># starosti</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>                      ___, <span class="co"># barva oci</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>                      ___, <span class="co"># domaci kraj</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>                      ___, <span class="co"># geografska sirina</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>                      ___) <span class="co"># geografska dolzina</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>sosolci</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<hr>
<p><br></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>